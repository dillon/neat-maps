(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),l=n.n(o),c=(n(55),n(2)),i=n(7),s=n(40),u=n(4),p=(n(23),function(e){var t=e.message;return{type:"LOGIN_FAILURE",payload:{message:void 0===t?"Login failed":t}}}),d=function(e){var t=e.email,n=e.password;return function(e){e({type:"LOGIN",payload:{message:{message:"checking credentials..."}.message}});var a="?email=".concat(t,"&password=").concat(n);return fetch("https://neat-mvp-api.herokuapp.com/v1/auth"+a,{method:"POST"}).then(function(e){return e.json()}).then(function(t){var n=t.email,a=t.error;return e(n?function(e){var t=e.account,n=e.message;return{type:"LOGIN_SUCCESS",payload:{account:t,message:void 0===n?"Login success. Redirecting...":n}}}({account:n}):p({message:a.message}))}).catch(function(t){var n=t.message;return e(p({message:void 0===n?"login error":n}))})}};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={account:"",message:""},b=n(8),y=function(e){return!(Array.from(new Set(e)).length===e.length)},O=function(e){return{type:"FILE_UPLOAD_FAILURE",payload:{message:e.message}}},E=function(e){var t=e.data,n=e.columns,a=e.name;return function(e){var r=n.ADDRESS,o=n.CITY,l=n.STATE,c=n.ZIPCODE,i=n.CATEGORY;if(y([r,o,l,c,i]))return e(O({message:"Column selections must each be unique"}));var s=function(e){var t=e.data,n=e.columns,a=n.ADDRESS,r=n.CITY,o=n.STATE,l=n.ZIPCODE,c=n.CATEGORY;return t.map(function(e){return{address:e[a-1],city:e[r-1],state:e[o-1],zipcode:e[l-1],category:e[c-1]}})}({data:t,columns:n});e({type:"FILE_UPLOAD_REQUEST"});var u=s.map(function(e){var t=e.address,n=e.city,a=e.state,r=e.zipcode,o=e.category,l="".concat(t,", ").concat(n,", ").concat(a," ").concat(r);return fetch("https://maps.googleapis.com/maps/api/geocode/json?key=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/neat-maps"}).REACT_APP_GOOGLE_API_KEY,"&address=").concat(l)).then(function(e){return e.json()}).then(function(e){var t=e.results;return{category:o,lat:t[0].geometry.location.lat,lng:t[0].geometry.location.lng,fullAddress:l}})});return Promise.all(u).then(function(t){return e({type:"FILE_UPLOAD_SUCCESS",payload:{name:(n={data:t,name:a}).name,data:n.data}});var n}).catch(function(t,n){var a=t.message;console.log(a,n),e(O({message:"Error parsing file"}))})}},h=function(e){return{type:"DELETE_FILE",payload:{index:e.index}}},v=function(e){return{type:"SELECT_FILE",payload:{index:e.index}}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S={files:[],fileNames:[],numberOfFiles:0,index:-1,message:""},x=Object(i.c)({loginReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGIN_FAILURE":return f({},e,{message:t.payload.message});case"LOGIN_SUCCESS":return f({},e,{account:t.payload.account,message:t.payload.message});case"LOGOUT":return f({},e,{account:"",message:t.payload.message});default:return e}},fileUploadReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILE_UPLOAD_FAILURE":return C({},e,{message:t.payload.message});case"FILE_UPLOAD_SUCCESS":return C({},e,{files:[].concat(Object(b.a)(e.files),[t.payload.data]),fileNames:[].concat(Object(b.a)(e.fileNames),[t.payload.name]),numberOfFiles:e.numberOfFiles+1,index:e.index+1,message:""});case"DELETE_FILE":return C({},e,{files:[].concat(Object(b.a)(e.files.slice(0,t.payload.index)),Object(b.a)(e.files.slice(t.payload.index+1))),fileNames:[].concat(Object(b.a)(e.fileNames.slice(0,t.payload.index)),Object(b.a)(e.fileNames.slice(t.payload.index+1))),numberOfFiles:e.numberOfFiles-1,index:e.index>=e.numberOfFiles-1?e.index-1:e.index,message:""});case"SELECT_FILE":return C({},e,{index:t.payload.index});default:return e}}}),w=Object(i.e)(x,Object(i.d)(Object(i.a)(s.a))),D=n(13),I=n(14),P=n(16),L=n(15),A=n(17),T=n(41),k={selectContainer:{padding:"15px 0px",display:"flex",flex:1,minWidth:500},selectSpan:{flex:1},select:{marginLeft:10},fileInfoContainer:{padding:3,margin:2,display:"flex",flex:1},fileInfoContainerSelected:{padding:3,margin:2,display:"flex",flex:1,fontWeight:"bold"},fileInfoChild:{flex:1},selectButton:{margin:"0px 10px"},input:{margin:"20px 0px"}};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(P.a)(this,Object(L.a)(t).call(this,e))).handleDataUpload=function(e){n.setState({data:e.slice(0,21)})},n.handleErrorUpload=function(e){var t=e.reason;(0,n.props.dispatch)(O({message:t}))},n.handleSubmitUpload=function(e){e.persist(),e.preventDefault();var t=document.getElementById("fileInput").files[0].name,a=n.props.dispatch,r=n.state,o=r.data,l=r.columns,c=r.columns,i=c.ADDRESS,s=c.CITY,u=c.STATE,p=c.ZIPCODE,d=c.CATEGORY;y([i,s,u,p,d])?a(O({message:"Each label must have a unique value."})):a(E({data:o,columns:l,name:t})).then(function(){return n.resetState()})},n.handleChangeSelect=function(e){e.persist(),n.setState(function(t){return{columns:F({},t.columns,Object(u.a)({},e.target.name,parseInt(e.target.value,10)))}})},n.resetState=function(){var e=document.getElementById("fileInput");e&&(e.value=""),n.setState({data:null,columns:{address:null,city:null,state:null,zipcode:null,category:null}})},n.selectFile=function(e){var t=e.event,a=e.index;t.preventDefault(),(0,n.props.dispatch)(v({index:a}))},n.deleteFile=function(e){var t=e.event,a=e.index;t.preventDefault(),(0,n.props.dispatch)(h({index:a}))},n.state={data:null,columns:{ADDRESS:null,CITY:null,STATE:null,ZIPCODE:null,CATEGORY:null}},n}return Object(A.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.message,a=t.numberOfFiles,o=t.fileNames,l=t.index,c=this.state,i=c.data,s=c.columns,u=s.ADDRESS,p=s.CITY,d=s.STATE,m=s.ZIPCODE,f=s.CATEGORY;return r.a.createElement("div",null,r.a.createElement("data",null),r.a.createElement("div",null,o.map(function(t,n){return r.a.createElement("div",{key:t+n,style:n===l?k.fileInfoContainerSelected:k.fileInfoContainer},r.a.createElement("span",{style:k.fileInfoChild},t),l===n?"":r.a.createElement("button",{type:"submit",name:"select-file",onClick:function(t){return e.selectFile({event:t,index:n})},style:k.selectButton},"Select"),r.a.createElement("button",{type:"submit",name:"delete-file",onClick:function(t){return e.deleteFile({event:t,index:n})}},"Delete"))})),a<3?r.a.createElement("form",{id:"form",onSubmit:this.handleSubmitUpload},r.a.createElement(T.a,{keys:[0,1,2,3,4],onDataUploaded:this.handleDataUpload,onError:this.handleErrorUpload,render:function(e){return r.a.createElement("input",{id:"fileInput",type:"file",style:k.input,onChange:e,accept:".csv"})}}),i&&["ADDRESS","CITY","STATE","ZIPCODE","CATEGORY"].map(function(t){return r.a.createElement("div",{key:t,style:k.selectContainer},r.a.createElement("span",{style:k.selectSpan},t,": "),r.a.createElement("select",{style:k.select,defaultValue:"default",form:"form",name:t,onChange:e.handleChangeSelect,value:e.state[t]},r.a.createElement("option",{key:"select ".concat(t)},"SELECT ",t),Object.keys(i[0]).map(function(e,t){return r.a.createElement("option",{key:e+1,value:t+1},i[0][e])})))}),i&&r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:"Submit",title:"Submit",disabled:!(i&&u&&p&&d&&m&&f)}),r.a.createElement("p",null,"Designate columns")),!a&&!i&&r.a.createElement("p",null," Upload a .csv file")):r.a.createElement("p",null,"Maximum 3 files uploaded"),r.a.createElement("p",null,n))}}]),t}(r.a.Component),_=Object(c.b)(function(e){var t=e.fileUploadReducer;return{numberOfFiles:t.numberOfFiles,fileNames:t.fileNames,message:t.message,index:t.index}})(function(e){return r.a.createElement(R,e)}),N=n(48),G=n.n(N),Y=n(49);var B=function(e){var t=e.arr;if(!t)return!1;for(var n=t[0].lat,a=t[0].lat,r=t[0].lng,o=t[0].lng,l=1,c=t.length;l<c;l+=1){var i=t[l],s=i.lat,u=i.lng;n=s<n?s:n,a=s>a?s:a,r=u<r?u:r,o=u>o?u:o}return{ne:{lat:a,lng:o},sw:{lat:n,lng:r}}},z={containerDefault:{position:"absolute",transform:"translate(-50%, -50%)",textDecoration:"none",color:"black"},containerHover:{position:"absolute",transform:"translate(-50%, -50%)",zIndex:900,textDecoration:"none",color:"black"},dotDefault:function(e){return{width:15,height:15,backgroundColor:e.backgroundColor,border:"1px solid black",borderRadius:"50%"}},dotHover:{width:15,height:15,backgroundColor:"transparent",cursor:"pointer",border:"1px solid black",borderRadius:"50%"},label:{padding:10,border:"1px solid black",position:"absolute",transform:"translate(-50%, calc(-50%-50px)",minWidth:150,backgroundColor:"white"},categoryText:{marginTop:5,fontStyle:"italic"}},Z=function(e){var t=e.backgroundColor,n=e.$hover,a=void 0!==n&&n,o=e.text,l=o.fullAddress,c=o.category,i=z.dotDefault,s=z.dotHover,u=z.label,p=z.containerHover,d=z.containerDefault,m=z.categoryText,f="https://www.google.com/maps/place/".concat(l.replace(" ","+"));return r.a.createElement("a",{href:f,target:"_blank",rel:"noopener noreferrer",style:a?p:d},r.a.createElement("div",{style:a?s:i({backgroundColor:t})}),a&&r.a.createElement("div",{style:u},r.a.createElement("div",null,l),r.a.createElement("div",{style:m},c)))};Z.defaultProps={$hover:!1};var W=Z,H=function(e){var t=e.files,n=e.index,a={zoom:0,center:{lat:36,lng:-100}},o=B({arr:t[n]}),l={width:600,height:600},c=o?Object(Y.fitBounds)(o,l):a,i=c.zoom,s=c.center;return r.a.createElement("div",{style:{height:600,width:600}},r.a.createElement(G.a,{hoverDistance:15,bootstrapURLKeys:{key:Object({NODE_ENV:"production",PUBLIC_URL:"/neat-maps"}).REACT_APP_GOOGLE_API_KEY},center:s,zoom:i,defaultZoom:a.zoom,defaultCenter:a.center},n>=0&&t[n].map(function(e){var t,n=e.fullAddress,a=e.category,o=e.lat,l=e.lng;return r.a.createElement(W,{key:"".concat(o,"-").concat(l),lat:o,lng:l,backgroundColor:(t=a,"#".concat(function(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t}(function(e){for(var t=0,n=0;n<e.length;n+=1)t=e.charCodeAt(n)+((t<<5)-t);return t}(t)))),text:{fullAddress:n,category:a}})})))},K=Object(c.b)(function(e){var t=e.fileUploadReducer;return{files:t.files,index:t.index}})(function(e){return r.a.createElement(H,e)}),V=function(){return r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(K,null))},$={login:{display:"flex",flexDirection:"column",flex:1},row:{margin:10,flex:1,display:"flex",justifyContent:"space-between"},button:{margin:10},input:{margin:"0px 10px"},message:{margin:10}};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach(function(t){Object(u.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var M=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(P.a)(this,Object(L.a)(t).call(this,e))).handleFormChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(function(e){return{formInput:J({},e.formInput,Object(u.a)({},a,r))}})},n.handleSubmit=function(e){var t=n.state.formInput,a=t.email,r=t.password;(0,n.props.dispatch)(d({email:a,password:r})),e.preventDefault()},n.state={formInput:{email:"",password:""}},n}return Object(A.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.message,t=this.state.formInput,n=t.email,a=t.password;return r.a.createElement("div",{style:$.login},r.a.createElement("form",{onSubmit:this.handleSubmit,style:$.login},r.a.createElement("label",{htmlFor:"email",style:$.row},r.a.createElement("span",null,"Email: "),r.a.createElement("input",{style:$.input,autoComplete:"username",type:"text",name:"email",value:n,onChange:this.handleFormChange})),r.a.createElement("label",{htmlFor:"password",style:$.row},r.a.createElement("span",null,"Password: "),r.a.createElement("input",{style:$.input,autoComplete:"current-password",type:"password",name:"password",value:a,onChange:this.handleFormChange})),r.a.createElement("input",{type:"submit",value:"Submit",title:"Login",style:$.button})),r.a.createElement("p",{style:$.message},e))}}]),t}(r.a.Component),Q=Object(c.b)(function(e){return{message:e.loginReducer.message}})(function(e){return r.a.createElement(M,e)}),X=function(e){var t=e.account;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:50}},t?r.a.createElement(V,null):r.a.createElement(Q,null))},ee=Object(c.b)(function(e){return{account:e.loginReducer.account}})(function(e){return r.a.createElement(X,e)});var te=function(){return r.a.createElement(c.a,{store:w},r.a.createElement(ee,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,n){e.exports=n(103)},55:function(e,t,n){}},[[50,1,2]]]);
//# sourceMappingURL=main.3bd6278b.chunk.js.map